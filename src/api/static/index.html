<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>舞台音效控制台</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="app">
        <!-- 连接状态指示器 -->
        <div id="connection-status" class="status-bar">
            <span id="status-indicator" class="indicator disconnected"></span>
            <span id="status-text">连接中...</span>
        </div>

        <!-- 模式切换标签 -->
        <div class="mode-tabs">
            <button id="tab-auto" class="tab-btn active" data-mode="auto">自动模式</button>
            <button id="tab-manual" class="tab-btn" data-mode="manual">手动模式</button>
        </div>

        <!-- 自动模式面板 -->
        <div id="panel-auto" class="panel active">
            <!-- Cue 列表 -->
            <div class="section">
                <h3>Cue 列表</h3>
                <div id="cue-list" class="cue-list">
                    <!-- Cue 项目将动态生成 -->
                </div>
            </div>

            <!-- 播放控制 -->
            <div class="section">
                <h3>播放控制</h3>
                <div class="control-buttons">
                    <button id="btn-play" class="btn btn-primary long-press" data-action="play">
                        <span class="btn-icon">▶</span>
                        <span class="btn-text">播放</span>
                        <div class="progress-ring"></div>
                    </button>
                    <button id="btn-pause" class="btn btn-warning long-press" data-action="pause">
                        <span class="btn-icon">⏸</span>
                        <span class="btn-text">暂停</span>
                        <div class="progress-ring"></div>
                    </button>
                    <button id="btn-stop" class="btn btn-danger" data-action="stop">
                        <span class="btn-icon">⏹</span>
                        <span class="btn-text">停止</span>
                    </button>
                    <button id="btn-next" class="btn btn-secondary" data-action="next">
                        <span class="btn-icon">⏭</span>
                        <span class="btn-text">下一段</span>
                    </button>
                </div>
            </div>

            <!-- 进度条 -->
            <div class="section">
                <div class="progress-container">
                    <div id="progress-bar" class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <div class="time-display">
                        <span id="current-time">0:00</span>
                        <span id="total-time">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 手动模式面板 -->
        <div id="panel-manual" class="panel">
            <!-- 音频选择 -->
            <div class="section">
                <h3>音频选择</h3>
                <select id="audio-select" class="audio-select">
                    <option value="">-- 选择音频 --</option>
                </select>
            </div>

            <!-- 入点设置 -->
            <div class="section">
                <h3>入点设置</h3>
                <div class="input-group">
                    <label for="start-point">入点 (秒):</label>
                    <input type="number" id="start-point" value="0" min="0" step="0.1">
                </div>
                <div class="input-group">
                    <label for="silence-before">前置静音 (秒):</label>
                    <input type="number" id="silence-before" value="0" min="0" step="0.1">
                </div>
            </div>

            <!-- 播放控制 -->
            <div class="section">
                <h3>播放控制</h3>
                <div class="control-buttons">
                    <button id="btn-manual-play" class="btn btn-primary long-press" data-action="play">
                        <span class="btn-icon">▶</span>
                        <span class="btn-text">播放</span>
                        <div class="progress-ring"></div>
                    </button>
                    <button id="btn-manual-pause" class="btn btn-warning long-press" data-action="pause">
                        <span class="btn-icon">⏸</span>
                        <span class="btn-text">暂停</span>
                        <div class="progress-ring"></div>
                    </button>
                    <button id="btn-manual-stop" class="btn btn-danger" data-action="stop">
                        <span class="btn-icon">⏹</span>
                        <span class="btn-text">停止</span>
                    </button>
                    <button id="btn-replay" class="btn btn-secondary" data-action="replay">
                        <span class="btn-icon">🔄</span>
                        <span class="btn-text">重播</span>
                    </button>
                </div>
            </div>

            <!-- 断点管理 -->
            <div class="section">
                <h3>断点管理</h3>
                <div class="breakpoint-controls">
                    <button id="btn-save-bp" class="btn btn-small">保存断点</button>
                    <button id="btn-clear-bp" class="btn btn-small btn-danger">清除断点</button>
                </div>
                <div id="breakpoint-list" class="breakpoint-list">
                    <!-- 断点列表将动态生成 -->
                </div>
            </div>

            <!-- 进度条 -->
            <div class="section">
                <div class="progress-container">
                    <div id="manual-progress-bar" class="progress-bar">
                        <div id="manual-progress-fill" class="progress-fill"></div>
                    </div>
                    <div class="time-display">
                        <span id="manual-current-time">0:00</span>
                        <span id="manual-total-time">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 音效面板 -->
        <div class="section sfx-section">
            <h3>音效</h3>
            <div id="sfx-grid" class="sfx-grid">
                <!-- 音效按钮将动态生成 -->
            </div>
        </div>

        <!-- 音量控制 -->
        <div class="section volume-section">
            <h3>音量控制</h3>
            <div class="volume-control">
                <label>BGM:</label>
                <input type="range" id="bgm-volume" min="0" max="300" value="100">
                <span id="bgm-volume-value">100%</span>
            </div>
            <div class="volume-control">
                <label>音效:</label>
                <input type="range" id="sfx-volume" min="0" max="300" value="100">
                <span id="sfx-volume-value">100%</span>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
